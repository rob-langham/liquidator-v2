# Entities

type VaultEntity @entity(immutable: false) {
  id: Bytes!
  owner: Bytes! # address
  seriesId: Bytes! # bytes6
  ilkId: Bytes! # bytes6
  ink: BigInt! # int128
  art: BigInt! # int128
  instrument: InstrumentEntity!
}

type SeriesEntity @entity(immutable: true) {
  id: Bytes!
  baseId: Bytes! # bytes6
  fyToken: Bytes! # address
  matured: Boolean! # bool
  asset: AssetEntity!
  instruments: [InstrumentEntity!]! @derivedFrom(field: "series")
}

type AssetEntity @entity(immutable: true) {
  id: ID!
  assetId: Bytes!
  address: Bytes! # address
  series: [SeriesEntity!]! @derivedFrom(field: "asset")
}

type InstrumentEntity @entity(immutable: true) {
  id: Bytes!
  seriesId: Bytes! # bytes6
  ilkId: Bytes! # bytes6
  series: SeriesEntity!
  vaults: [VaultEntity!]! @derivedFrom(field: "instrument")
}

type WitchLiquidatablePair @entity(immutable: false) {
  id: Bytes!
  ilkId: Bytes! # bytes6
  baseId: Bytes! # bytes6
  liquidationsEnabled: Boolean! # uint128
  asset: AssetEntity!
}

# Events

type AdminChanged @entity(immutable: true) {
  id: Bytes!
  previousAdmin: Bytes! # address
  newAdmin: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type BeaconUpgraded @entity(immutable: true) {
  id: Bytes!
  beacon: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type Upgraded @entity(immutable: true) {
  id: Bytes!
  implementation: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type DebtLimitsSet @entity(immutable: true) {
  id: Bytes!
  baseId: Bytes! # bytes6
  ilkId: Bytes! # bytes6
  max: BigInt! # uint96
  min: Int! # uint24
  dec: Int! # uint8
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type RateOracleAdded @entity(immutable: true) {
  id: Bytes!
  baseId: Bytes! # bytes6
  oracle: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type RoleAdminChanged @entity(immutable: true) {
  id: Bytes!
  role: Bytes! # bytes4
  newAdminRole: Bytes! # bytes4
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type RoleGranted @entity(immutable: true) {
  id: Bytes!
  role: Bytes! # bytes4
  account: Bytes! # address
  sender: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type RoleRevoked @entity(immutable: true) {
  id: Bytes!
  role: Bytes! # bytes4
  account: Bytes! # address
  sender: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type SpotOracleAdded @entity(immutable: true) {
  id: Bytes!
  baseId: Bytes! # bytes6
  ilkId: Bytes! # bytes6
  oracle: Bytes! # address
  ratio: BigInt! # uint32
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type VaultBuilt @entity(immutable: true) {
  id: Bytes!
  vaultId: Bytes! # bytes12
  owner: Bytes! # address
  seriesId: Bytes! # bytes6
  ilkId: Bytes! # bytes6
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type VaultDestroyed @entity(immutable: true) {
  id: Bytes!
  vaultId: Bytes! # bytes12
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type VaultGiven @entity(immutable: true) {
  id: Bytes!
  vaultId: Bytes! # bytes12
  receiver: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type VaultPoured @entity(immutable: true) {
  id: Bytes!
  vaultId: Bytes! # bytes12
  seriesId: Bytes! # bytes6
  ilkId: Bytes! # bytes6
  ink: BigInt! # int128
  art: BigInt! # int128
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type VaultRolled @entity(immutable: true) {
  id: Bytes!
  vaultId: Bytes! # bytes12
  seriesId: Bytes! # bytes6
  art: BigInt! # uint128
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type VaultStirred @entity(immutable: true) {
  id: Bytes!
  from: Bytes! # bytes12
  to: Bytes! # bytes12
  ink: BigInt! # uint128
  art: BigInt! # uint128
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type VaultTweaked @entity(immutable: true) {
  id: Bytes!
  vaultId: Bytes! # bytes12
  seriesId: Bytes! # bytes6
  ilkId: Bytes! # bytes6
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type AnotherWitchSet @entity(immutable: true) {
  id: Bytes!
  value: Bytes! # address
  isWitch: Boolean! # bool
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type Auctioned @entity(immutable: true) {
  id: Bytes!
  vaultId: Bytes! # bytes12
  auction_owner: Bytes! # address
  auction_start: BigInt! # uint32
  auction_baseId: Bytes! # bytes6
  auction_ink: BigInt! # uint128
  auction_art: BigInt! # uint128
  auction_auctioneer: Bytes! # address
  auction_ilkId: Bytes! # bytes6
  auction_seriesId: Bytes! # bytes6
  duration: BigInt! # uint256
  initialCollateralProportion: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type AuctioneerRewardSet @entity(immutable: true) {
  id: Bytes!
  auctioneerReward: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type Bought @entity(immutable: true) {
  id: Bytes!
  vaultId: Bytes! # bytes12
  buyer: Bytes! # address
  ink: BigInt! # uint256
  art: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type Cancelled @entity(immutable: true) {
  id: Bytes!
  vaultId: Bytes! # bytes12
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type Ended @entity(immutable: true) {
  id: Bytes!
  vaultId: Bytes! # bytes12
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type LimitSet @entity(immutable: true) {
  id: Bytes!
  ilkId: Bytes! # bytes6
  baseId: Bytes! # bytes6
  max: BigInt! # uint128
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type LineSet @entity(immutable: true) {
  id: Bytes!
  ilkId: Bytes! # bytes6
  baseId: Bytes! # bytes6
  duration: BigInt! # uint32
  vaultProportion: BigInt! # uint64
  collateralProportion: BigInt! # uint64
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type Point @entity(immutable: true) {
  id: Bytes!
  param: Bytes! # bytes32
  oldValue: Bytes! # address
  newValue: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type ContangoWitchRoleAdminChanged @entity(immutable: true) {
  id: Bytes!
  role: Bytes! # bytes4
  newAdminRole: Bytes! # bytes4
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type ContangoWitchRoleGranted @entity(immutable: true) {
  id: Bytes!
  role: Bytes! # bytes4
  account: Bytes! # address
  sender: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}

type ContangoWitchRoleRevoked @entity(immutable: true) {
  id: Bytes!
  role: Bytes! # bytes4
  account: Bytes! # address
  sender: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  index: BigInt!
}
